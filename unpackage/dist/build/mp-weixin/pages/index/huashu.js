(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/huashu"],{"00ba":function(t,e,o){"use strict";o.r(e);var a=o("30f3"),n=o.n(a);for(var r in a)"default"!==r&&function(t){o.d(e,t,(function(){return a[t]}))}(r);e["default"]=n.a},"30f3":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(o("edc3")),n=s(o("efb5")),r=s(o("8dbe"));function s(t){return t&&t.__esModule?t:{default:t}}var i=function(){o.e("common/tabbar").then(function(){return resolve(o("49c3"))}.bind(null,o)).catch(o.oe)},u=0,l=1,c=0,d=!1,g="",f={data:function(){return{totalRows:"0",isShowNoResult:!1,contentHeight:0,platForm:0,suggestMsgText:"",searchKeyword:"",strings:"",navigation:{height:88,top:30,left:17,title:""},iconSize:20,searchText:"",articleList:[]}},components:{tabBar:i},computed:{scrollHeight:function(){var e=0,o=t.getSystemInfoSync(),a=o.windowHeight;return getApp().globalData.isIphoneX&&(a-=34),e=0==this.articleList.length&&this.isShowNoResult?a-350:a-50,e},level:function(){var t={};return t=n.default.getUserInfoFromStorage(),t.level?t.level:this.$store.getters.userInfo.level?this.$store.getters.userInfo.level:0},uid:function(){var t=n.default.cache("wx_userid",null);return t||(this.$store.getters.userInfo.uid?this.$store.getters.userInfo.uid:0)}},onHide:function(){},onShareAppMessage:function(){var t=getCurrentPages(),e=t[t.length-1],o=e.route,a=e.options,r=n.default.buidQuery(a),s=a.title?decodeURI(a.title):'"搜索结果"';return{title:s,path:o+"?"+r,success:function(){console.log("share success!")},fail:function(){console.log("share..sucess!")}}},created:function(){console.log("created....")},watch:{},onPullDownRefresh:function(){var e=this;e.getHuashuArticleList(),setTimeout((function(){t.stopPullDownRefresh()}),100)},onUnload:function(){},onLoad:function(e){console.log("ONload!...."),console.log("option",e),this.setIosBackground();var o=t.getSystemInfoSync();this.contentHeight=o.windowHeight;var a=e.title,n=e.keyword;u=e.navId,console.log("key",n),n?(this.searchKeyword=g=n,d=!0,t.setNavigationBarTitle({title:'"搜索结果"'})):(d=!1,g=""),a&&(a=decodeURIComponent(a),t.setNavigationBarTitle({title:a})),this.platForm=getApp().globalData.platform,t.startPullDownRefresh()},methods:{parseHtmlNodes:function(t){if(!d)return t;var e=(0,r.default)(t);return e},suggestMsg:function(){var t=["未搜索到结果","好的文案还在酝酿中,敬请期待","编辑还在赶来的路上"];console.log("Math.random()",Math.random());var e=parseInt(3*Math.random());return t[e]},suggest:function(){t.navigateTo({url:"/pages/user/complaint"})},setIosBackground:function(){2==getApp().globalData.platform&&(console.log("setIosBackgroundColor:"),"function"==typeof wx.setBackgroundColor&&wx.setBackgroundColor({backgroundColor:"#2369E6",backgroundColorBottom:"#2369E6"}))},getHuashuArticleList:function(){var e=this,o=this.searchKeyword,n=u,r={};o?r={keyword:o}:n&&(r.cid=n),r.uid=this.uid,r.nowpage=1,l=1,console.log("huashu params:",r);var s=getApp().globalData,i=s.serverUri,d=s.auth;r.auth=d;var g=i+"?mod=loveword&ac=list";o&&(g=i+"?mod=loveword&ac=search"),r.filterData=!0,a.default.request(g,r).then((function(a){if(1==a.status){var n=a.data;e.articleList=n,c=a.totalpage;var r=parseInt(a.total);e.totalRows=r,e.isShowNoResult=!1}else e.suggestMsgText=e.suggestMsg(),e.articleList=[],c=0,e.totalRows=0,o&&(e.isShowNoResult=!0,2==getApp().globalData.platform&&t.setBackgroundColor({backgroundColor:"#2369E6"}))}))},searchKeywordFunc:function(){var e=this,o=this.searchKeyword;if(g=o,!o||o.length<1)t.showToast({title:"请输入关键词，且至少1个字符长度!",icon:"none",duration:2e3});else{t.setNavigationBarTitle({title:'"搜索结果"'});var n={filterData:!0};o&&(n.keyword=o),d=!0,n.uid=this.uid,n.nowpage=1,this.params=n;var r=getApp().globalData,s=r.serverUri,i=r.auth;n.auth=i;var u=s+"?mod=loveword&ac=search";a.default.request(u,n).then((function(o){if(1!=o.status)return e.suggestMsgText=e.suggestMsg(),e.articleList=[],e.totalRows=0,e.isShowNoResult=!0,void(2==getApp().globalData.platform&&t.setBackgroundColor({backgroundColorBottom:"#17ACDC"}));e.articleList=o.data,c=o.totalpage;var a=parseInt(o.total);e.totalRows=a,e.isShowNoResult=!1}))}},back:function(){t.navigateBack({url:"/pages/index/index"})},upgrade_vip:function(){0!=this.level?t.navigateTo({url:"/pages/user/upgrade_user_vip"}):t.switchTab({url:"/pages/user/index"})},copyHuashu:function(e){var o=e.split("@@")[1];t.setClipboardData({data:o,success:function(e){t.getClipboardData({success:function(e){t.showToast({title:"复制成功"})}})}})}},onReachBottom:function(){var e=this;getApp().globalData.level<=1||l>=c||(t.showLoading({title:"玩命加载中..."}),setTimeout((function(){var o=this;l++;var n={};n.nowpage=l,n.cid=u,n.uid=e.uid;var r=getApp().globalData,s=r.serverUri,i=r.auth;n.auth=i;var f="";d?(f=s+"?mod=loveword&ac=search",n.keyword=g):f=s+"?mod=loveword&ac=list",n.filterData=!0,a.default.request(f,n).then((function(a){if(1==a.status){t.hideLoading();for(var n=a.data.length,r=0;r<n;r++)e.articleList.push(a.data[r]);c=a.totalpage,o.totalRows=a.total}else t.hideLoading(),c=0,o.totalRows=0}))}),400))}};e.default=f}).call(this,o("543d")["default"])},"88a1":function(t,e,o){"use strict";var a=o("e698"),n=o.n(a);n.a},"937f":function(t,e,o){"use strict";o.r(e);var a=o("eec4"),n=o("00ba");for(var r in n)"default"!==r&&function(t){o.d(e,t,(function(){return n[t]}))}(r);o("88a1");var s,i=o("f0c5"),u=Object(i["a"])(n["default"],a["b"],a["c"],!1,null,"2ffd553d",null,!1,a["a"],s);e["default"]=u.exports},caee:function(t,e,o){"use strict";(function(t){o("1fff");a(o("66fd"));var e=a(o("937f"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},e698:function(t,e,o){},eec4:function(t,e,o){"use strict";var a={uniIcons:function(){return Promise.all([o.e("common/vendor"),o.e("components/uni-icons/uni-icons")]).then(o.bind(null,"4248"))}},n=function(){var t=this,e=t.$createElement,o=(t._self._c,t.__map(t.articleList,(function(e,o){var a=t.__map(e.content,(function(e,o){var a=e.split("@@"),n=t.parseHtmlNodes(e.split("@@")[1]);return{$orig:t.__get_orig(e),g0:a,m0:n}}));return{$orig:t.__get_orig(e),l0:a}})));t.$mp.data=Object.assign({},{$root:{l1:o}})},r=[];o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return r})),o.d(e,"a",(function(){return a}))}},[["caee","common/runtime","common/vendor"]]]);