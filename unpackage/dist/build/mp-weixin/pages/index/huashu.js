(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/huashu"],{"00ba":function(t,e,a){"use strict";a.r(e);var o=a("30f3"),n=a.n(o);for(var r in o)"default"!==r&&function(t){a.d(e,t,(function(){return o[t]}))}(r);e["default"]=n.a},"30f3":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(a("edc3")),n=r(a("efb5"));function r(t){return t&&t.__esModule?t:{default:t}}var i=function(){a.e("common/tabbar").then(function(){return resolve(a("49c3"))}.bind(null,a)).catch(a.oe)},s=0,u=1,l=0,c=!1,d=null,f={data:function(){return{totalRows:"0",isShowNoResult:!1,platForm:0,searchKeyword:"",navigation:{height:88,top:30,left:17,title:""},leaveOverCnt:0,iconSize:20,searchText:"",articleList:[]}},components:{tabBar:i},computed:{level:function(){return this.$store.getters.userInfo.level?this.$store.getters.userInfo.level:0},uid:function(){return this.$store.getters.userInfo.uid?this.$store.getters.userInfo.uid:0},scrollHeight:function(){var e=0,a=t.getSystemInfoSync(),o=a.windowHeight;return getApp().globalData.isIphoneX&&(o-=34),e=0==this.articleList.length&&this.isShowNoResult?o-350:o-50,e}},onShareAppMessage:function(){var t=getCurrentPages(),e=t[t.length-1],a=e.route,o=e.options,r=n.default.buidQuery(o),i=o.title?decodeURI(o.title):'"搜索结果"';return{title:i,path:a+"?"+r,success:function(){console.log("share success!")},fail:function(){console.log("share..sucess!")}}},watch:{},onPullDownRefresh:function(){var e=this;!1,e.getHuashuArticleList(),setTimeout((function(){t.stopPullDownRefresh()}),100)},onLoad:function(e){var a=e.title,o=e.keyword;s=e.navId,o&&(this.searchKeyword=o,c=!0,t.setNavigationBarTitle({title:'"搜索结果"'})),a&&(a=decodeURIComponent(a),t.setNavigationBarTitle({title:a})),this.platForm=getApp().globalData.platform,t.startPullDownRefresh()},methods:{suggest:function(){t.navigateTo({url:"/pages/user/complaint"})},getHuashuArticleList:function(){var t=this,e=this.searchKeyword,a=s,n={};e?n={keyword:e}:a&&(n.cid=a),n.uid=this.uid,n.nowpage=1,u=1;var r=getApp().globalData,i=r.serverUri,c=r.auth;n.auth=c;var d=i+"?mod=loveword&ac=list";e&&(d=i+"?mod=loveword&ac=search"),n.filterData=!0,o.default.request(d,n).then((function(a){if(1==a.status){var o=a.data;t.articleList=o,l=a.totalpage,t.totalRows=a.total;var n=parseInt(a.total);t.leaveOverCnt=n<=10&&n>3?n-3:7,t.isShowNoResult=!1}else t.articleList=[],l=0,t.totalRows=0,t.leaveOverCnt=0,e&&(t.isShowNoResult=!0)}))},searchKeywordFunc:function(){var e=this,a=this.searchKeyword;if(!a||a.length<2)t.showToast({title:"请输入关键词，且至少2个字符长度!",icon:"none",duration:2e3});else{!1;var n={filterData:!0};a&&(n.keyword=a),c=!0,n.uid=this.uid,n.nowpage=1,this.params=n;var r=getApp().globalData,i=r.serverUri,s=r.auth;n.auth=s;var u=i+"?mod=loveword&ac=search";o.default.request(u,n).then((function(t){if(1!=t.status)return e.articleList=[],e.totalRows=e.leaveOverCnt=0,void(e.isShowNoResult=!0);e.articleList=t.data,e.totalPage=t.totalpage,e.totalRows=t.total;var a=parseInt(t.total);e.leaveOverCnt=a<=10&&a>3?a-3:7,e.isShowNoResult=!1}))}},back:function(){t.navigateBack({url:"/pages/index/index"})},upgrade_vip:function(){if(this.level<2)return console.log("go here!"),void t.switchTab({url:"/pages/user/index"});t.navigateTo({url:"/pages/user/upgrade_user_vip"})},copyHuashu:function(e){var a=e.split("@@")[1];t.setClipboardData({data:a,success:function(e){t.getClipboardData({success:function(e){t.showToast({title:"复制成功"})}})}})}},onReachBottom:function(){var e=this;if(!c||this.searchKeyword&&!(this.searchKeyword.length<2)){if(u>=l&&this.level>1)return console.log("here!"),void(d&&clearTimeout(d));if(this.level<=1){var a=parseInt(this.totalRows);if(a<=10)return;var n=a%10;if(this.leaveOverCnt+10>a)return this.leaveOverCnt+=n,void(d&&clearTimeout(d))}t.showNavigationBarLoading(),d=setTimeout((function(){var a=this;if(u++,e.level<=1)return e.leaveOverCnt+=10,void t.hideNavigationBarLoading();var n={};n.nowpage=u,n.cid=s,n.uid=e.uid;var r=getApp().globalData,i=r.serverUri,d=r.auth;n.auth=d;var f="";c?(f=i+"?mod=loveword&ac=search",n.keyword=e.searchKeyword):f=i+"?mod=loveword&ac=list",n.filterData=!0,o.default.request(f,n).then((function(t){if(1==t.status){for(var o=t.data.length,n=0;n<o;n++)e.articleList.push(t.data[n]);a.leaveOverCnt+=10,l=t.totalpage,a.totalRows=t.total}else a.leaveOverCnt=0,l=0,a.totalRows=0})),t.hideNavigationBarLoading()}),200)}}};e.default=f}).call(this,a("543d")["default"])},4497:function(t,e,a){"use strict";var o={"uni-icons":function(){return Promise.all([a.e("common/vendor"),a.e("components/uni-icons/uni-icons")]).then(a.bind(null,"4248"))}},n=function(){var t=this,e=t.$createElement,o=(t._self._c,t.__map(t.articleList,(function(e,a){var o=t.__map(e.content,(function(e,a){var o=e.split("@@"),n=e.split("@@");return{$orig:t.__get_orig(e),g0:o,g1:n}}));return{$orig:t.__get_orig(e),l0:o}}))),n=a("20fb");t.$mp.data=Object.assign({},{$root:{l1:o,m0:n}})},r=[];a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return o}))},9317:function(t,e,a){"use strict";var o=a("e2c7"),n=a.n(o);n.a},"937f":function(t,e,a){"use strict";a.r(e);var o=a("4497"),n=a("00ba");for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);a("9317");var i,s=a("f0c5"),u=Object(s["a"])(n["default"],o["b"],o["c"],!1,null,"b3d4e51a",null,!1,o["a"],i);e["default"]=u.exports},caee:function(t,e,a){"use strict";(function(t){a("1fff");o(a("66fd"));var e=o(a("937f"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},e2c7:function(t,e,a){}},[["caee","common/runtime","common/vendor"]]]);