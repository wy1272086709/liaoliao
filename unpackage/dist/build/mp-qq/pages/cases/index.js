(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/cases/index"],{"0e48":function(t,e,n){"use strict";var a=n("4021"),o=n.n(a);o.a},1544:function(t,e,n){"use strict";var a,o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.tabArr,(function(e,n){var a=t.getNavKey(e.firstNav.navId),o=t.getIndexColor(n);return{$orig:t.__get_orig(e),m0:a,m1:o}})));t.$mp.data=Object.assign({},{$root:{l0:n}})},i=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}))},4021:function(t,e,n){},"819a":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("edc3")),o=i(n("efb5"));function i(t){return t&&t.__esModule?t:{default:t}}var r={},s=1,l=1,u=0,c=null,f="",d={data:function(){return{tabArr:[],list:[],swiperIdx:0,recommendList:[],caseTabIndex:0,isIphoneX:!1,scrollHeight:"",scrollInto:""}},computed:{uid:function(){var t=o.default.cache("wx_userid",null);return t||(this.$store.getters.userInfo.uid?this.$store.getters.userInfo.uid:0)}},onShareAppMessage:function(){console.log("share....");var t=getCurrentPages(),e=t[t.length-1],n=e.route;return{title:"恋爱技巧",path:"/"+n,success:function(){console.log("share success!")},fail:function(){console.log("share..sucess!")}}},onHide:function(){r={}},onPullDownRefresh:function(){console.log("页面下拉刷新");var e=this;e.getCaseList(u,!0,1),setTimeout((function(){t.stopPullDownRefresh()}),200)},onLoad:function(e){t.showShareMenu({withShareTicket:!0});var n=t.getSystemInfoSync(),a=(n.screenHeight,n.windowWidth),o=n.windowHeight,i=750/a;console.log("winHeight",o);var r=getApp().globalData.isIphoneX;this.isIphoneX=r;var s=r?30:0;this.scrollHeight=o*i-81-s,o-=60,r&&(o-=30/i),this.getRecommendImages(),this.getHuashuTabbar()},mounted:function(){},components:{},beforeDestroy:function(){c&&clearTimeout(c)},onPageScroll:function(t){console.log("e onPageScroll...",t)},methods:{getNavKey:function(t){return"tab_"+t},upper:function(){},scroll:function(t){console.log("e",t)},selectedBanner:function(t,e){console.log("s",t,e)},bindchange:function(t){this.swiperIdx=t.detail.current},bannerChange:function(){},gotoViewArticle:function(e,n,a){var o="/pages/cases/detail?id="+e+"&cid="+n+"&title="+a;console.log("url",o),t.navigateTo({url:o})},getRecommendImages:function(){var t=this,e=getApp().globalData,n=e.serverUri,o=e.auth,i=n+"?mod=news&ac=banner";a.default.request(i,{auth:o,filterData:!0}).then((function(e){console.log("getRecommendImages resp",e),t.recommendList=e.data}))},getBannerPics:function(t){for(var e=t.length,n=[],a=0;a<e;a++)n.push({image:t[a].litpic,id:t[a].nid});return console.log("banners:",n),n},tabArrData:function(t){var e=this.caseTabIndex,n=(t.length,t);if(e>=4){for(var a=0;a<=e-4;a++)n[a].display="none";for(var o=e-3;o<=e;o++)n[o].display="flex"}else for(var i=0;i<4;i++)n[i].display="flex";return n},onReachBottom:function(){console.log("to lower!");var t=this;console.log("page",l),l>=s?clearTimeout(c):c=setTimeout((function(){l++,console.log("page....",l),t.getCaseList(u,!1,l)}),500)},lower:function(){console.log("to lower!");var t=this;console.log("page",l),l>=s?clearTimeout(c):c=setTimeout((function(){l++,console.log("page....",l),t.getCaseList(u,!1,l)}),500)},getCaseList:function(t,e,n){var o=this,i=getApp().globalData,r=i.serverUri,l=i.auth,u=r+"?mod=news&ac=list";a.default.request(u,{auth:l,cid:t,uid:this.uid,nowpage:n,filterData:!0}).then((function(t){var n=Object.prototype.toString.call(t.data),a=!1;if(-1!==n.indexOf("Array")&&(t.data=o.initHuashuListImage(t.data),a=!0,s=t.totalpage),e)o.list=a?t.data:[];else{if(!a)return;for(var i=t.data.length,r=0;r<i;r++)o.list.push(t.data[r])}}))},initHuashuListImage:function(t){for(var e=t.length,n=0;n<e;n++)t[n].thumbUrl?t[n].thumbUrl=t[n].thumbUrl:t[n].thumbUrl="/static/img/love_skills/thumb.png";return t},getHuashuTabbar:function(){var t=this,e=getApp().globalData,n=e.serverUri,o=e.auth,i=this,r=n+"?mod=news&ac=get_all_cid";a.default.request(r,{auth:o}).then((function(e){t.tabArr=i.initTabData(e),u=i.tabArr[0].firstNav.navId,f=i.tabArr[0].firstNav.title,t.getCaseList(u,!0,1)}))},initTabData:function(t){for(var e=t.length,n=0;n<e;n++)t[n].display="flex";return t},getArticleView:function(e){t.navigateTo({url:"/pages/cases/detail?id="+e+"&cid="+u+"&title="+f})},switchCasesTab:function(t){l=1;var e=t.detail.current||t.currentTarget.dataset.index||0;if(console.log("thisCurr",e),e!=this.caseTabIndex){this.caseTabIndex=e;var n=this.tabArr[e].firstNav.navId;u=n,f=this.tabArr[e].firstNav.title,this.scrollInto="tab_"+n;var a=parseInt((new Date).getTime()/1e3);this.delMap(r),"undefined"==typeof r[a]&&(this.getCaseList(n,!0,1),r[a]=1)}},getIndexColor:function(t){var e=["#FF0000 ","#FF7F00","#FFFF00 ","#00FF00","#00FFFF","#0000FF","#8B00FF"];return e[t%7]},delMap:function(t){var e=Object.keys(t);if(!(e.length<=1)){for(var n=0;n<e.length;n++)n!=e.length-1&&delete t[e[n]];return t}},switchTab:function(t){if(l=1,console.log("switchTab index:",t),t!=this.caseTabIndex){this.caseTabIndex=t;var e=this.tabArr[t].firstNav.navId;u=e,f=this.tabArr[t].firstNav.title;var n=parseInt((new Date).getTime()/1e3);this.delMap(r),"undefined"==typeof r[n]&&(this.scrollInto="tab_"+e,this.getCaseList(e,!0,1),r[n]=1,console.log("eMap",r))}},changeTabDisplay:function(t){this.tabArr.length;if(t>=3){for(var e=0;e<=t-3;e++)this.tabArr[e].display="none";for(var n=t-2;n<=t;n++)this.tabArr[n].display="flex"}else{console.log("index",t);for(var a=0;a<3;a++)this.tabArr[a].display="flex"}}}};e.default=d}).call(this,n("a821")["default"])},a9a8:function(t,e,n){"use strict";n.r(e);var a=n("819a"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},c162:function(t,e,n){"use strict";n.r(e);var a=n("1544"),o=n("a9a8");for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("0e48");var r,s=n("f0c5"),l=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);e["default"]=l.exports},f7ba:function(t,e,n){"use strict";(function(t){n("1fff");a(n("66fd"));var e=a(n("c162"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("a821")["createPage"])}},[["f7ba","common/runtime","common/vendor"]]]);